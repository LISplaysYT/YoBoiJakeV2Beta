<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Dynamic Theme Application</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
    }
    .container {
      padding: 20px;
    }
    button {
      padding: 10px 20px;
      margin: 10px 5px;
      border: 1px solid;
      cursor: pointer;
    }
    .message {
      padding: 10px;
      margin: 10px 0;
      border: 1px solid;
      border-radius: 5px;
    }
    .user-message {
      text-align: right;
    }
    .ai-message {
      text-align: left;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>Dynamic Theme Selector</h1>
    <button onclick="applyTheme('default')">Default</button>
    <button onclick="applyTheme('dark')">Dark</button>
    <button onclick="applyTheme('light')">Light</button>

    <div class="messages">
      <div class="message user-message">This is a user message.</div>
      <div class="message ai-message">This is an AI message.</div>
      <div class="message user-message">Another user message.</div>
      <div class="message ai-message">Another AI message.</div>
    </div>
  </div>

  <script>
    function applyTheme(theme) {
      const allElements = document.querySelectorAll("*");
      const styleSheet = document.getElementById('dynamic-theme-styles') || createDynamicStyleSheet();

      if (theme === 'default') {
        allElements.forEach(el => {
          el.style.backgroundColor = '';
          el.style.color = '';
          el.style.borderColor = '';
        });
        styleSheet.innerHTML = '';
        return;
      }

      let backgroundColor, textColor, borderColor, hoverBackgroundColor, hoverTextColor, userMessageBg, aiMessageBg, userMessageBorder, aiMessageBorder;
      switch (theme) {
        case 'dark':
          backgroundColor = '#121212';
          textColor = 'white';
          borderColor = 'gray';
          hoverBackgroundColor = '#1c1c1c';
          hoverTextColor = '#f0f0f0';
          userMessageBg = '#333';
          aiMessageBg = '#444';
          userMessageBorder = '#555';
          aiMessageBorder = '#666';
          break;
        case 'light':
          backgroundColor = 'white';
          textColor = 'black';
          borderColor = 'black';
          hoverBackgroundColor = '#f7f7f7';
          hoverTextColor = '#333';
          userMessageBg = '#f0f0f0';
          aiMessageBg = '#e0e0e0';
          userMessageBorder = '#d0d0d0';
          aiMessageBorder = '#c0c0c0';
          break;
        default:
          return;
      }

      allElements.forEach(el => {
        el.style.backgroundColor = backgroundColor;
        el.style.color = textColor;
        el.style.borderColor = borderColor;
      });

      const messages = document.querySelectorAll('.message, .user-message, .ai-message');
      messages.forEach(msg => {
        if (msg.classList.contains('user-message')) {
          msg.style.backgroundColor = userMessageBg;
          msg.style.borderColor = userMessageBorder;
          msg.style.color = textColor;
        } else if (msg.classList.contains('ai-message')) {
          msg.style.backgroundColor = aiMessageBg;
          msg.style.borderColor = aiMessageBorder;
          msg.style.color = textColor;
        }
      });

      styleSheet.innerHTML = `
        button, a {
          transition: background-color 0.3s, color 0.3s;
        }
        button:hover, a:hover {
          background-color: ${hoverBackgroundColor};
          color: ${hoverTextColor};
        }
      `;
    }

    function createDynamicStyleSheet() {
      const styleSheet = document.createElement('style');
      styleSheet.id = 'dynamic-theme-styles';
      document.head.appendChild(styleSheet);
      return styleSheet;
    }
  </script>
</body>
</html>
